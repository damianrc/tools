<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WhatsApp Bulk Sender Tool</title>
    <link rel="stylesheet" href="https://raw.githubusercontent.com/damianrc/tools/main/stylingone.css">
    <link rel="stylesheet" href="https://raw.githubusercontent.com/damianrc/tools/main/stylingtwo.css">
    <style>
        /* Custom Styles (Adapt as needed) */
        .form-boxes {
            background-color: #ffffff;
            padding: 30px;
            border-radius: 20px;
            width: 90%;
            max-width: 1200px; /* Increased max-width to accommodate the new column */
            margin: 0 auto;
        }

        .form-row {
            display: flex;
            justify-content: space-between;
        }

        .btn-enabled {
            background-color: #4D5BED;
            color: white;
        }

        .btn-enabled:hover {
            cursor: pointer;
            background-color: #3D48BD;
        }

        .btn-disabled {
            background-color: #6c757d;
            border-color: #6c757d;
            color: white;
        }

        .btn-disabled:hover {
            cursor: pointer;
            background-color: #6c757d;
            border-color: #6c757d;
        }

        @media(max-width: 576px) {
            .form-boxes {
                padding: 15px 10px;
                border-radius: 0px;
            }

            .form-row {
                row-gap: 7px;
            }

            .form-row input {
                padding: 10px 8px;
            }

            .wa-btn {
                padding: 10px 15px;
            }

            .small-container {
                padding: 0px;
            }

            .wa-icon {
                font-size: 22px;
            }
        }
    </style>
</head>

<body>
    <div class="container small-container" style="color: #101F41;">
        <div class="mx-auto" style="max-width: 100%;">
            <h1 class="display-5 font-weight-bold text-center feature-text mb-4">WhatsApp Bulk Sender</h1>
            <div class="px-3">
                <p class="font-weight-bold mb-2" style="font-size: 21px;">Instructions ðŸ“–</p>
                <p class="mb-4">Customize the message template below, paste or enter the names, phone numbers, and addresses you want to message, then click the SEND button for each recipient.</p>
            </div>
            <div class="form-group shadow-lg mb-4 form-boxes">
                <label for="defaultMessageTemplateText" class="font-weight-bold" style="font-size: 21px;">Message Template ðŸ’¬</label>
                <textarea class="form-control" id="defaultMessageTemplateText" rows="8">Hi @name! Hope you're having a wonderful week &#128075;    I'm happy to share that the ACME Residences Showflat at @address will be open for viewing next weekend. If you'd like to see it, just let me know and I'll schedule a VIP viewing for you &#128522;    Jane Doe, Head of Sales, ACME Residences</textarea>
                <small class="form-text text-muted mx-1">The <strong style="color: #3b82f4;">@name</strong> and <strong style="color: #3b82f4;">@address</strong> tokens will be replaced with the contact's name and address when sending.</small>
            </div>

            <div class="form-group shadow-lg mb-4 form-boxes">
                <label for="whatsapp-mode" class="font-weight-bold" style="font-size: 21px;">WhatsApp Mode</label>
                <select class="form-control" id="whatsapp-mode">
                    <option value="api">WhatsApp API</option>
                    <option value="web">WhatsApp Web</option>
                </select>
            </div>

            <div class="form-boxes shadow-lg">
                <p class="font-weight-bold mb-2" style="font-size: 21px;">Recipients ðŸ‘¥</p>
                <p class="mb-3 pb-3 border-bottom" style="font-size: 1em; line-height: 1.3;">Enter the name, phone number, and address of each recipient below, or <a href="#" data-toggle="modal" data-target="#modal-pasteContactsCSV" class="text-info font-weight-bold">paste contacts</a> to populate their details all at once. <span class="d-sm-none">Please include the country code.</span></p>
                <div id="contact-rows-container">
                    <div class="form-row">
                        <div class="col-4 col-sm-3">
                            <label for="clientName">Name</label>
                        </div>
                        <div class="col-4 col-sm-3">
                            <label for="clientPhone">Phone Number</label>
                        </div>
                        <div class="col-4 col-sm-4">
                            <label for="clientAddress">Property Address</label>
                        </div>
                        <div class="col-2 d-flex justify-content-center col-sm-2">
                        </div>
                    </div>
                    <div class="form-row mb-3 mt-0">
                        <div class="col-4 col-sm-3">
                            <input id="clientName_1" type="text" class="form-control" placeholder="Name 1">
                        </div>
                        <div class="col-4 col-sm-3">
                            <input id="clientPhone_1" type="tel" class="form-control phone-input" placeholder="Phone #">
                        </div>
                        <div class="col-4 col-sm-4">
                            <input id="clientAddress_1" type="text" class="form-control" placeholder="Address 1">
                        </div>
                        <div class="col-2 d-flex justify-content-center col-sm-2">
                            <button id="whatsappClientBtn_1" onclick="sendWhatsappToClient(1)" class="btn btn-primary wa-btn btn-enabled d-flex flex-row align-items-center">
                                <i class="fab fa-whatsapp mr-sm-2 wa-icon"></i>
                                <span class="d-none d-sm-flex">SEND</span>
                            </button>
                        </div>
                    </div>
                    <!-- Repeat the above block for more clients -->
                </div>
                <div class="form-row mt-4 mb-2">
                    <div class="col-6 col-sm-4">
                        <a href="javascript:addFiveMoreRows();" class="text-info ml-1 font-weight-bold"><i class="fas fa-plus-circle"></i> Add 5 more rows</a>
                    </div>
                    <div class="col-6 col-sm-4 text-right text-sm-left">
                        <a href="#" class="text-info ml-1 font-weight-bold" data-toggle="modal" data-target="#modal-pasteContactsCSV"><i class="fas fa-edit"></i> Bulk Edit Contacts</a>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="modal fade" id="modal-pasteContactsCSV" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-body" style="background-color: #f8f9fa;">
                        <label for="defaultMessageTemplateText" class="">Paste Contacts as CSV</label>
                        <p class="mb-1">Paste or type a comma-separated list contacts (one per row) in the format of:
                            <strong class="text-privyr-blue">name</strong>, <strong class="text-privyr-blue">phone</strong>, <strong class="text-privyr-blue">address</strong>
                        </p>
                        <textarea class="form-control mt-2" id="contactsFromCSV" placeholder="Tony,+155512345678,123 Main St&#10;Pepper,+6565420779,456 Oak Ave&#10;Bruce,+919984909812,789 Pine Ln" rows="6"></textarea>
                        <small class="form-text text-muted mt-2">For the best results, include the country code at the start of the phone number (e.g. +6591234567).</small>
                        <div class="text-right mt-3">
                            <button type="button" class="btn btn-outline-secondary mr-2" data-dismiss="modal">Cancel</button>
                            <button type="button" class="btn btn-info" onclick="convertContactsFromCSV()">Populate Contacts</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="https://kit.fontawesome.com/a076d05399.js"></script>
    <script>
        function addFiveMoreRows() {
            const rowCount = document.querySelectorAll('.form-row').length;
            for (let i = 0; i < 5; i++) {
                const newRow = document.createElement('div');
                newRow.classList.add('form-row', 'mb-3');
                newRow.innerHTML = `
                    <div class="col-4 col-sm-3">
                        <input id="clientName_${rowCount + i + 1}" type="text" class="form-control" placeholder="Name ${rowCount + i + 1}">
                    </div>
                    <div class="col-4 col-sm-3">
                        <input id="clientPhone_${rowCount + i + 1}" type="tel" class="form-control phone-input" placeholder="Phone #">
                    </div>
                    <div class="col-4 col-sm-4">
                        <input id="clientAddress_${rowCount + i + 1}" type="text" class="form-control" placeholder="Address ${rowCount + i + 1}">
                    </div>
                    <div class="col-2 d-flex justify-content-center col-sm-2">
                        <button id="whatsappClientBtn_${rowCount + i + 1}" onclick="sendWhatsappToClient(${rowCount + i + 1})" class="btn btn-primary wa-btn btn-enabled d-flex flex-row align-items-center">
                            <i class="fab fa-whatsapp mr-sm-2 wa-icon"></i>
                            <span class="d-none d-sm-flex">SEND</span>
                        </button>
                    </div>
                `;
                document.getElementById('contact-rows-container').appendChild(newRow);
            }
        }

        function sendWhatsappToClient(index) {
            const name = document.getElementById(`clientName_${index}`).value;
            const phone = document.getElementById(`clientPhone_${index}`).value;
            const address = document.getElementById(`clientAddress_${index}`).value;
            const template = document.getElementById('defaultMessageTemplateText').value;

            const message = template.replace('@name', name).replace('@address', address);
            const whatsappMode = document.getElementById('whatsapp-mode').value;

            if (whatsappMode === 'api') {
                const url = `https://api.whatsapp.com/send?phone=${phone}&text=${encodeURIComponent(message)}`;
                window.open(url, '_blank');
            } else if (whatsappMode === 'web') {
                const url = `https://web.whatsapp.com/send?phone=${phone}&text=${encodeURIComponent(message)}`;
                window.open(url, '_blank');
            }
        }

        function convertContactsFromCSV() {
            const contactsCSV = document.getElementById('contactsFromCSV').value;
            const contacts = contactsCSV.split('\n');
            contacts.forEach((contact, index) => {
                const [name, phone, address] = contact.split(',');
                document.getElementById(`clientName_${index + 1}`).value = name.trim();
                document.getElementById(`clientPhone_${index + 1}`).value = phone.trim();
                document.getElementById(`clientAddress_${index + 1}`).value = address.trim();
            });
            $('#modal-pasteContactsCSV').modal('hide');
        }
    </script>
</body>

</html>
