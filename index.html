<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WhatsApp Bulk Sender Tool</title>
    <link rel="stylesheet" href="stylingone.css">
    <link rel="stylesheet" href="stylingtwo.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <style>
        /* Custom Styles (Adapt as needed) */
        .form-boxes {
            background-color: #ffffff;
            padding: 30px;
            border-radius: 20px;
            width: 90%;
            max-width: 1200px; /* Increased max-width to accommodate the new column */
            margin: 0 auto;
        }

        .form-row {
            display: flex;
            justify-content: space-between;
        }

        .btn-enabled {
            background-color: #4D5BED;
            color: white;
        }

        .btn-enabled:hover {
            cursor: pointer;
            background-color: #3D48BD;
        }

        .btn-disabled {
            background-color: #6c757d;
            border-color: #6c757d;
            color: white;
        }

        .btn-disabled:hover {
            cursor: pointer;
            background-color: #6c757d;
            border-color: #6c757d;
        }

        @media(max-width: 576px) {
            .form-boxes {
                padding: 15px 10px;
                border-radius: 0px;
            }

            .form-row {
                row-gap: 7px;
            }

            .form-row input {
                padding: 10px 8px;
            }

            .wa-btn {
                padding: 10px 15px;
            }

            .small-container {
                padding: 0px;
            }

            .wa-icon {
                font-size: 22px;
            }
        }
    </style>
</head>

<body>
    <div class="container small-container" style="color: #101F41;">
        <div class="mx-auto" style="max-width: 100%;">
            <h1 class="display-5 font-weight-bold text-center feature-text mb-4">WhatsApp Bulk Sender</h1>
            <div class="px-3">
                <p class="font-weight-bold mb-2" style="font-size: 21px;">Instructions ðŸ“–</p>
                <p class="mb-4">Customize the message template below, paste or enter the names, phone numbers and addresses
                    you
                    want to message, then click the SEND button for each recipient.</p>
            </div>
            <div class="form-group shadow-lg mb-4 form-boxes">
                <label for="defaultMessageTemplateText" class="font-weight-bold"
                    style="font-size: 21px;">Message Template ðŸ’¬</label>
                <textarea class="form-control" id="defaultMessageTemplateText" rows="8">Hi @name! Hope you're having a wonderful week &#128075;    I'm happy to share that the ACME Residences Showflat at @address will be open for viewing next weekend. If you'd like to see it, just let me know and I'll schedule a VIP viewing for you &#128522;    Jane DoeHead of Sales, ACME Residences</textarea>
                <small class="form-text text-muted mx-1">The <strong style="color: #3b82f4;">@name</strong> and <strong style="color: #3b82f4;">@address</strong> tokens will be replaced with the
                    contact's name and address when sending.</small>
            </div>

            <div class="form-group shadow-lg mb-4 form-boxes">
                <label for="whatsapp-mode" class="font-weight-bold" style="font-size: 21px;">WhatsApp Mode</label>
                <select class="form-control" id="whatsapp-mode">
                    <option value="api">WhatsApp API</option>
                    <option value="web">WhatsApp Web</option>
                </select>
            </div>

            <div class="form-boxes shadow-lg">
                <p class="font-weight-bold mb-2" style="font-size: 21px;">Recipients ðŸ‘¥</p>
                <p class="mb-3 pb-3 border-bottom" style="font-size: 1em; line-height: 1.3;">Enter the name, phone
                    number and address
                    of each recipient below, or <a href="#" data-toggle="modal" data-target="#modal-pasteContactsCSV"
                        class="text-info font-weight-bold">paste contacts</a> to populate their details all at once. <span
                        class="d-sm-none">Please include the country code.</span></p>
                <div id="contact-rows-container">
                    <div class="form-row">
                        <div class="col-4 col-sm-3">
                            <label for="clientName">Name</label>
                        </div>
                        <div class="col-4 col-sm-3">
                            <label for="clientPhone">Phone Number</label>
                        </div>
                        <div class="col-4 col-sm-4">
                            <label for="clientAddress">Property Address</label>
                        </div>
                        <div class="col-2 d-flex justify-content-center col-sm-2">
                        </div>
                    </div>
                    <div class="form-row mb-3 mt-0" id="contact-row-1">
                        <div class="col-4 col-sm-3">
                            <input id="clientName_1" type="text" class="form-control" placeholder="Name 1">
                        </div>
                        <div class="col-4 col-sm-3">
                            <input id="clientPhone_1" type="tel" class="form-control phone-input"
                                placeholder="Phone #">
                        </div>
                        <div class="col-4 col-sm-4">
                            <input id="clientAddress_1" type="text" class="form-control" placeholder="Address 1">
                        </div>
                        <div class="col-2 d-flex justify-content-center col-sm-2">
                            <button id="whatsappClientBtn_1" onclick="sendWhatsappToClient(1)"
                                class="btn btn-primary wa-btn btn-enabled d-flex flex-row align-items-center">
                                <i class="fab fa-whatsapp mr-sm-2 wa-icon"></i>
                                <span class="d-none d-sm-flex">SEND</span>
                            </button>
                        </div>
                    </div>
                    <div class="form-row mb-3 mt-0" id="contact-row-2">
                        <div class="col-4 col-sm-3">
                            <input id="clientName_2" type="text" class="form-control" placeholder="Name 2">
                        </div>
                        <div class="col-4 col-sm-3">
                            <input id="clientPhone_2" type="tel" class="form-control phone-input"
                                placeholder="Phone #">
                        </div>
                        <div class="col-4 col-sm-4">
                            <input id="clientAddress_2" type="text" class="form-control" placeholder="Address 2">
                        </div>
                        <div class="col-2 d-flex justify-content-center col-sm-2">
                            <button id="whatsappClientBtn_2" onclick="sendWhatsappToClient(2)"
                                class="btn btn-primary wa-btn btn-enabled d-flex flex-row align-items-center">
                                <i class="fab fa-whatsapp mr-sm-2 wa-icon"></i>
                                <span class="d-none d-sm-flex">SEND</span>
                            </button>
                        </div>
                    </div>
                    <div class="form-row mb-3 mt-0" id="contact-row-3">
                        <div class="col-4 col-sm-3">
                            <input id="clientName_3" type="text" class="form-control" placeholder="Name 3">
                        </div>
                        <div class="col-4 col-sm-3">
                            <input id="clientPhone_3" type="tel" class="form-control phone-input"
                                placeholder="Phone #">
                        </div>
                        <div class="col-4 col-sm-4">
                            <input id="clientAddress_3" type="text" class="form-control" placeholder="Address 3">
                        </div>
                        <div class="col-2 d-flex justify-content-center col-sm-2">
                            <button id="whatsappClientBtn_3" onclick="sendWhatsappToClient(3)"
                                class="btn btn-primary wa-btn btn-enabled d-flex flex-row align-items-center">
                                <i class="fab fa-whatsapp mr-sm-2 wa-icon"></i>
                                <span class="d-none d-sm-flex">SEND</span>
                            </button>
                        </div>
                    </div>
                    <div class="form-row mb-3 mt-0" id="contact-row-4">
                        <div class="col-4 col-sm-3">
                            <input id="clientName_4" type="text" class="form-control" placeholder="Name 4">
                        </div>
                        <div class="col-4 col-sm-3">
                            <input id="clientPhone_4" type="tel" class="form-control phone-input"
                                placeholder="Phone #">
                        </div>
                        <div class="col-4 col-sm-4">
                            <input id="clientAddress_4" type="text" class="form-control" placeholder="Address 4">
                        </div>
                        <div class="col-2 d-flex justify-content-center col-sm-2">
                            <button id="whatsappClientBtn_4" onclick="sendWhatsappToClient(4)"
                                class="btn btn-primary wa-btn btn-enabled d-flex flex-row align-items-center">
                                <i class="fab fa-whatsapp mr-sm-2 wa-icon"></i>
                                <span class="d-none d-sm-flex">SEND</span>
                            </button>
                        </div>
                    </div>
                    <div class="form-row mb-3 mt-0" id="contact-row-5">
                        <div class="col-4 col-sm-3">
                            <input id="clientName_5" type="text" class="form-control" placeholder="Name 5">
                        </div>
                        <div class="col-4 col-sm-3">
                            <input id="clientPhone_5" type="tel" class="form-control phone-input"
                                placeholder="Phone #">
                        </div>
                        <div class="col-4 col-sm-4">
                            <input id="clientAddress_5" type="text" class="form-control" placeholder="Address 5">
                        </div>
                        <div class="col-2 d-flex justify-content-center col-sm-2">
                            <button id="whatsappClientBtn_5" onclick="sendWhatsappToClient(5)"
                                class="btn btn-primary wa-btn btn-enabled d-flex flex-row align-items-center">
                                <i class="fab fa-whatsapp mr-sm-2 wa-icon"></i>
                                <span class="d-none d-sm-flex">SEND</span>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="form-row mt-4 mb-2">
                    <div class="col-6 col-sm-4">
                        <a href="javascript:addFiveMoreRows();" class="text-info ml-1 font-weight-bold"><i
                                class="fas fa-plus-circle"></i> Add 5 more rows</a>
                    </div>
                    <div class="col-6 col-sm-4 text-right text-sm-left">
                        <a href="#" class="text-info ml-1 font-weight-bold" data-toggle="modal"
                            data-target="#modal-pasteContactsCSV"><i class="fas fa-edit"></i> Bulk Edit Contacts</a>
                    </div>
                    <div class="col-12 d-flex justify-content-center col-sm-2"></div>
                </div>
            </div>
        </div>
        <div class="modal fade" id="modal-pasteContactsCSV" tabindex="-1" role="dialog"
            aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-body" style="background-color: #f8f9fa;">
                        <label for="contactsFromCSV" class="">Paste Contacts</label>
                        <p class="mb-1">Paste or type the contact details (one per row). The tool will try to
                            intelligently identify the Name, Phone Number, and Address columns.</p>
                        <textarea class="form-control mt-2" id="contactsFromCSV"
                            placeholder="Tony   +155512345678   123 Main St&#10;Pepper  +6565420779   456 Oak Ave&#10;Bruce   +919984909812  789 Pine Ln"
                            rows="6">Tony   +6593888455   123 Main St&#10;Pepper  +6565420779   456 Oak Ave&#10;Bruce   +919984909812  789 Pine Ln</textarea>
                        <small class="form-text text-muted mt-2">For the best results, ensure there is consistent
                            spacing (e.g., using tabs or multiple spaces) between the name, phone number, and address.
                            Include the country code at the start of the phone number (e.g., +6591234567).</small>
                        <div class="text-right mt-3">
                            <button type="button" class="btn btn-outline-secondary mr-2"
                                data-dismiss="modal">Cancel</button>
                            <button type="button" class="btn btn-info" onclick="convertContactsFromText()">Populate
                                Contacts</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script>
        let contactCounter = 5;

        function addFiveMoreRows() {
            for (let i = 0; i < 5; i++) {
                contactCounter++;
                let newRow = `
                    <div class="form-row mb-3 mt-0" id="contact-row-<span class="math-inline">\{contactCounter\}"\>
<div class\="col\-4 col\-sm\-3"\>
<input id\="clientName\_</span>{contactCounter}" type="text" class="form-control" placeholder="Name <span class="math-inline">\{contactCounter\}"\>
</div\>
<div class\="col\-4 col\-sm\-3"\>
<input id\="clientPhone\_</span>{contactCounter}" type="tel" class="form-control phone-input"
                                placeholder="Phone #">
                        </div>
                        <div class="col-4 col-sm-4">
                            <input id="clientAddress_${contactCounter}" type="text" class="form-control" placeholder="Address <span class="math-inline">\{contactCounter\}"\>
</div\>
<div class\="col\-2 d\-flex justify\-content\-center col\-sm\-2"\>
<button id\="whatsappClientBtn\_</span>{contactCounter}" onclick="sendWhatsappToClient(${contactCounter})"
                                class="btn btn-primary wa-btn btn-enabled d-flex flex-row align-items-center">
                                <i class="fab fa-whatsapp mr-sm-2 wa-icon"></i>
                                <span class="d-none d-sm-flex">SEND</span>
                            </button>
                        </div>
                    </div>
                `;
                document.getElementById('contact-rows-container').insertAdjacentHTML('beforeend', newRow);
            }
        }

        function sendWhatsappToClient(clientID) {
            var clientName = $("#clientName_" + clientID).val();
            var clientPhone = $("#clientPhone_" + clientID).val();
            var clientAddress = $("#clientAddress_" + clientID).val();
            var messageTemplate = $("#defaultMessageTemplateText").val();
            var message = messageTemplate.replace("@name", clientName).replace("@address", clientAddress);
            var whatsappMode = $("#whatsapp-mode").val();

            let whatsappUrl = "";
            if (whatsappMode === "api") {
                whatsappUrl = `https://api.whatsapp.com
